<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Summation Calculator + Explanation</title>
<style>
  :root{font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;--bg:#f7fafc;--card:#fff;--muted:#6b7280;}
  body{margin:0;background:var(--bg);color:#111;}
  .container{max-width:980px;margin:36px auto;padding:20px;}
  .card{background:var(--card);border-radius:12px;padding:20px;box-shadow:0 6px 18px rgba(16,24,40,0.06);}
  label{display:block;font-size:13px;margin:8px 0 4px;color:var(--muted);}
  input[type=text], input[type=number]{width:100%;padding:10px;border:1px solid #e5e7eb;border-radius:8px;font-size:15px;}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;}
  button{background:#0ea5a4;color:white;padding:10px 14px;border-radius:10px;border:0;font-weight:600;cursor:pointer;}
  pre{background:#111827;color:#fff;padding:12px;border-radius:8px;overflow:auto;}
  table{width:100%;border-collapse:collapse;margin-top:12px;}
  th,td{padding:8px;border-bottom:1px solid #f3f4f6;text-align:right;}
  th{background:#f9fafb;text-align:left;}
  .muted{color:var(--muted);font-size:13px;}
  .row{display:flex;gap:8px;align-items:center;}
  .small{font-size:13px;}
  .tabs{display:flex;gap:12px;margin-bottom:12px;}
  .tab{padding:8px 16px;border-radius:8px;cursor:pointer;background:#e5e7eb;font-weight:600;}
  .tab.active{background:#0ea5a4;color:white;}
  .tab-content{display:none;}
  .tab-content.active{display:block;}
</style>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
<div class="container">
  <div class="tabs">
    <div class="tab active" onclick="showTab(0)">Calculator</div>
    <div class="tab" onclick="showTab(1)">How It Works</div>
  </div>

  <div class="tab-content active">
    <div class="card">
      <h2>Summation calculator</h2>
      <p class="muted">Evaluates \(\sum_{i=lower}^{upper}\big[ A(r_1)^i - B(r_2)^i\big](r_3)^{upper-i}\)</p>

      <div class="grid" style="margin-top:12px">
        <div><label>A (coefficient)</label><input id="A" type="number" step="any" value="600"></div>
        <div><label>B (coefficient)</label><input id="B" type="number" step="any" value="360"></div>
        <div><label>r1 (1+rate1)</label><input id="r1" type="number" step="any" value="1.10"></div>
        <div><label>r2 (1+rate2)</label><input id="r2" type="number" step="any" value="1.08"></div>
        <div><label>r3 (growth factor)</label><input id="r3" type="number" step="any" value="1.12"></div>
        <div><label>lower (i0)</label><input id="i0" type="number" step="1" value="0"></div>
        <div><label>upper (iN)</label><input id="iN" type="number" step="1" value="19"></div>
      </div>

      <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
        <button id="go">Compute</button>
        <div class="small muted">Result (full precision): <code id="result">‚Äî</code></div>
        <div class="small muted">Rounded: <strong id="resultRounded">‚Äî</strong></div>
      </div>

      <div style="margin-top:14px">
        <div class="muted">LaTeX formula:</div>
        <pre id="latex"> </pre>
      </div>

      <div style="margin-top:12px">
        <label>WolframAlpha input (copy/paste):</label>
        <div style="display:flex;gap:8px"><input id="wa" type="text" style="flex:1"><button onclick="copyWA()">Copy</button></div>
      </div>

      <div style="margin-top:18px">
        <div class="muted">Terms:</div>
        <table>
          <thead><tr><th>i</th><th>term value</th></tr></thead>
          <tbody id="terms"></tbody>
        </table>
      </div>

      <div style="margin-top:16px;display:flex;gap:12px;flex-wrap:wrap">
        <a href="#" onclick="resetDefaults();return false;">Reset to your case</a>
        <a href="https://www.wolframalpha.com/" target="_blank">Open WolframAlpha</a>
      </div>
    </div>
  </div>

  <div class="tab-content">
    <div class="card">
      <h1>How the Summation Calculator Works</h1>
      <p>This calculator evaluates the sum:</p>
      <p class="muted">\(\displaystyle \sum_{i=i_0}^{i_N} \big[ A (r_1)^i - B (r_2)^i \big] (r_3)^{i_N-i} \)</p>

      <h2>Step-by-Step Explanation</h2>
      <ol>
        <li><strong>Input coefficients:</strong> <code>A</code> and <code>B</code> multiply the powers of <code>r1</code> and <code>r2</code>.</li>
        <li><strong>Exponential growth:</strong> Each term is scaled by <code>r1^i</code> and <code>r2^i</code> to model compounding effects.</li>
        <li><strong>Weighting factor:</strong> The difference of the powers is multiplied by <code>r3^(iN - i)</code> to adjust terms depending on their position in the sum.</li>
        <li><strong>Summation:</strong> All terms from <code>i = i0</code> to <code>i = iN</code> are added to get the total.</li>
      </ol>

      <h2>Quick Tips</h2>
      <ul>
        <li>Ensure <code>iN ‚â• i0</code>.</li>
        <li>Decimal inputs are allowed for coefficients and rates.</li>
        <li>You can copy the WolframAlpha input to verify the sum analytically.</li>
      </ul>

      <p class="muted" style="margin-top:24px; text-align:center;">Shoutout to üçØ for the help with the math!</p>
    </div>
  </div>
</div>

<script>
  // Tab switching
  function showTab(index){
    document.querySelectorAll('.tab').forEach((t,i)=>t.classList.toggle('active',i===index));
    document.querySelectorAll('.tab-content').forEach((c,i)=>c.classList.toggle('active',i===index));
  }

  // Calculator functions
  function compute() {
    const A=parseFloat(document.getElementById('A').value);
    const B=parseFloat(document.getElementById('B').value);
    const r1=parseFloat(document.getElementById('r1').value);
    const r2=parseFloat(document.getElementById('r2').value);
    const r3=parseFloat(document.getElementById('r3').value);
    const i0=parseInt(document.getElementById('i0').value,10);
    const iN=parseInt(document.getElementById('iN').value,10);
    if([A,B,r1,r2,r3].some(isNaN)){alert('Please enter valid numbers');return;}
    if(iN<i0){alert('Upper limit must be >= lower limit');return;}
    let total=0;
    const tbody=document.getElementById('terms'); tbody.innerHTML='';
    for(let i=i0;i<=iN;i++){
      const term=(A*Math.pow(r1,i)-B*Math.pow(r2,i))*Math.pow(r3,iN-i);
      total+=term;
      const tr=document.createElement('tr');
      tr.innerHTML=`<td style="text-align:left">i=${i}</td><td>${term.toFixed(10)}</td>`;
      tbody.appendChild(tr);
    }
    document.getElementById('result').textContent=total.toFixed(12);
    document.getElementById('resultRounded').textContent=Number(total).toLocaleString(undefined,{maximumFractionDigits:2});
    document.getElementById('latex').textContent=`\\sum_{i=${i0}}^{${iN}}\\left[ ${A}(${r1.toFixed(2)})^{i} - ${B}(${r2.toFixed(2)})^{i} \\right](${r3.toFixed(2)})^{${iN}-i}`;
    if(window.MathJax){MathJax.typesetPromise();}
    document.getElementById('wa').value=`sum[( ${A}*(${r1})^i - ${B}*(${r2})^i)*(${r3})^(${iN}-i), i=${i0}..${iN}]`;
  }
  function copyWA(){const t=document.getElementById('wa');t.select();document.execCommand('copy');alert('Copied to clipboard');}
  function resetDefaults(){document.getElementById('A').value=600;document.getElementById('B').value=360;document.getElementById('r1').value=1.10;document.getElementById('r2').value=1.08;document.getElementById('r3').value=1.12;document.getElementById('i0').value=0;document.getElementById('iN').value=19;compute();}
  window.addEventListener('DOMContentLoaded',()=>{document.getElementById('go').addEventListener('click',compute);compute();});
</script>
</body>
</html>
